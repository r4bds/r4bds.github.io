<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 8: Creating a Simple R-package – R for Bio Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab09.html" rel="next">
<link href="./lab07.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-bdef442aaf320a139b1684e38e335c71.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lab00.html">Course Labs</a></li><li class="breadcrumb-item"><a href="./lab08.html">Lab 8: Creating a Simple R-package</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Bio Data Science</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to R for Bio Data Science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prologue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prologue</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting_started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./lab00.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Labs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1: Course Intro &amp; the Very Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2: Data Visualisation I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3: Data Visualisation II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4: Data Wrangling I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 5: Data Wrangling II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 6: Applying Functional Programming with Purrr to Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 7: Collaborative Bio Data Science using GitHub via RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab08.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lab 8: Creating a Simple R-package</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 9 Creating a Simple Shiny Application</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 10 Project Startup &amp; Industry Talks</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./primers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_linear_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primer on Linear Models in <code>R</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_logistic_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primer on Logistic Regression in <code>R</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primer on Functions in <code>R</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_r_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Primer on R package development</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_paths_and_projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paths &amp; Projects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_variable_assignment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variable Assignment in <code>R</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./guide_rstudio_server.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide for Cloud server and the RStudio IDE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./guide_working_locally.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide for Working Locally</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./guide_building_r4ds2e_locally.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide for Building the R4DS2e Book Locally</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_styling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Styling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./course_elements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Elements</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ai_in_r4bds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Use of AI in the R for Bio Data Science Course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project FAQ</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_checklist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Checklist</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exam.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exam</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Package(s)</a></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#learning-materials" id="toc-learning-materials" class="nav-link" data-scroll-target="#learning-materials">Learning Materials</a></li>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning Objectives</a></li>
  <li><a href="#sec-exercises" id="toc-sec-exercises" class="nav-link" data-scroll-target="#sec-exercises">Exercises</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks">TASKS</a></li>
  <li><a href="#task-1---setting-up-the-r-package" id="toc-task-1---setting-up-the-r-package" class="nav-link" data-scroll-target="#task-1---setting-up-the-r-package">Task 1 - Setting up the R package</a></li>
  <li><a href="#task-2---build-the-package" id="toc-task-2---build-the-package" class="nav-link" data-scroll-target="#task-2---build-the-package">Task 2 - Build the package</a></li>
  <li><a href="#task-3---group-discussion" id="toc-task-3---group-discussion" class="nav-link" data-scroll-target="#task-3---group-discussion">Task 3 - Group discussion</a></li>
  </ul></li>
  <li><a href="#group-assignment-important-see-how-to" id="toc-group-assignment-important-see-how-to" class="nav-link" data-scroll-target="#group-assignment-important-see-how-to"><span style="color: red;">GROUP ASSIGNMENT</span> (Important, see: how to)</a>
  <ul class="collapse">
  <li><a href="#last-tip-on-packages" id="toc-last-tip-on-packages" class="nav-link" data-scroll-target="#last-tip-on-packages">Last tip on packages</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lab00.html">Course Labs</a></li><li class="breadcrumb-item"><a href="./lab08.html">Lab 8: Creating a Simple R-package</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Lab 8: Creating a Simple R-package</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Package(s)</h2>
<ul>
<li><a href="https://github.com/r-lib/devtools">devtools</a></li>
<li><a href="https://devtools.r-lib.org">usethis</a></li>
<li><a href="https://roxygen2.r-lib.org">roxygen2</a></li>
<li><a href="https://testthat.r-lib.org">testthat</a></li>
<li><a href="https://rdrr.io/cran/gert/">gert</a></li>
</ul>
</section>
<section id="schedule" class="level2">
<h2 class="anchored" data-anchor-id="schedule">Schedule</h2>
<ul>
<li>08.00 - 08.15: <a href="https://raw.githack.com/r4bds/r4bds.github.io/main/recap_lab08.html">Recap of Lab 7</a></li>
<li>08.15 - 08.45: <a href="https://raw.githack.com/r4bds/r4bds.github.io/main/lecture_lab08.html">Lecture</a></li>
<li>08.45 - 09.00: Break</li>
<li>09.00 - 12.00: <a href="#sec-exercises">Exercises</a></li>
</ul>
</section>
<section id="learning-materials" class="level2">
<h2 class="anchored" data-anchor-id="learning-materials">Learning Materials</h2>
<p><em>Please prepare the following materials:</em></p>
<ul>
<li>Book: <a href="https://r-pkgs.org">R Packages (2e): Welcome!</a></li>
<li>Book: <a href="https://r-pkgs.org/introduction.html">R Packages (2e): Introduction</a></li>
<li>Book: <a href="https://r-pkgs.org/whole-game.html">R Packages (2e): Chapter 1 The Whole Game</a></li>
<li>Video: <a href="https://www.youtube.com/watch?v=EpTkT6Rkgbs">Building R packages with devtools and usethis | RStudio</a> (<em>This is optional and is basically a video walk-through of the reading material</em>)</li>
</ul>
</section>
<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning Objectives</h2>
<p><em>A student who has met the objectives of the session will be able to:</em></p>
<ul>
<li>Prepare a simple R package for distributing documented functions</li>
<li>Explain the terms Repository, Dependencies, and Namespace</li>
<li>Implement testing in an R package</li>
<li>Collaboratively work on an R package on GitHub</li>
</ul>
</section>
<section id="sec-exercises" class="level2">
<h2 class="anchored" data-anchor-id="sec-exercises">Exercises</h2>
<p><em>Read the steps of this exercises carefully while completing them</em></p>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p><em>First, make sure to read and discuss the feedback you got from last week’s assignment!</em></p>
<p>The aim of these exercises is to set up a collaborative coding project using GitHub and collaborate on creating a simple R package that replicates the central dogma of molecular biology.</p>
<p>The exercises will build upon what you learned in <a href="./lab07.html">Lab 7</a> and its <a href="./lab07.html#sec-exercises">exercises</a>. But don’t worry too much, the setup steps will be given here as well.</p>
<hr>
</section>
<section id="tasks" class="level3">
<h3 class="anchored" data-anchor-id="tasks">TASKS</h3>
<p>If you haven’t read the <a href="./primer_r_packages.html">Primer on R packages</a> yet, consider reading it now.</p>
</section>
<section id="task-1---setting-up-the-r-package" class="level3">
<h3 class="anchored" data-anchor-id="task-1---setting-up-the-r-package">Task 1 - Setting up the R package</h3>
<p>In the first task, <strong>one team member</strong> (you decide who) will initiate a package project and push it to Github. Then, when instructed, the <strong>remaining group members</strong> will connect to that repository, and the real package building will begin.</p>
<section id="task-1.1---create-r-package" class="level4">
<h4 class="anchored" data-anchor-id="task-1.1---create-r-package">Task 1.1 - Create R Package</h4>
<ol type="1">
<li>Go to <a href="https://teaching.healthtech.dtu.dk/22100/rstudio.php">R for Bio Data Science RStudio Server</a> and login.</li>
<li>Click <code>Create a project</code><img src="images/L08_create.png" class="img-fluid" style="width:5.0%"> in the top left and choose <code>New Directory</code>.</li>
<li>Select <code>R Package</code> and pick a fitting Package name.
<ul>
<li>The package you will create will replicate the central dogma of molecular biology. Let that inspire you</li>
<li>Look up naming rules <a href="https://r-pkgs.org/workflow101.html#name-your-package">here</a></li>
<li>The most important rule: <code>_</code>, <code>-</code>, and <code>'</code> are not allowed.</li>
</ul></li>
<li>Tick the “Create git repository” box.</li>
<li>Click “Create project”.</li>
</ol>
<p>RStudio will now create an R project for you that contains all necessary files and folders.</p>
<ol start="6" type="1">
<li>Open the <code>DESCRIPTION</code> file and write a title for your package, a small description, and add authors.</li>
</ol>
<ul>
<li>When adding authors, the format is:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Authors<span class="sc">@</span>R<span class="sc">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">person</span>(<span class="at">given =</span> <span class="st">"firstname"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"lastname"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">role =</span> <span class="fu">c</span>(<span class="st">"aut"</span>, <span class="st">"cre"</span>), <span class="co"># There must be a "cre", but there can only be one</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">email =</span> <span class="st">"your@email.com"</span>), </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">person</span>(<span class="at">given =</span> <span class="st">"firstname"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"lastname"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">role =</span> <span class="st">"aut"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">email =</span> <span class="st">"your@email.com"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>Create an MIT license (from the console) <code>usethis::use_mit_license("Group name")</code></li>
<li><em>If you didn’t tick the “Create git repository”</em>: Run <code>usethis::use_git()</code>. <em>If the “Git” tab is not in the lower left panel</em>: reopen the R project.</li>
<li><details>
<summary>
<strong>Optional</strong> setup steps (generally good, but not essential for this course)
</summary>
<ul>
<li>
Add a Readme file <code>usethis::use_readme_rmd( open = FALSE )</code>. You will do that in the Group Assignment later
</li>
<li>
Add a lifecycle badge: <code>usethis::use_lifecycle_badge( "Experimental" )</code>
</li>
<li>
Write vignettes: <code>usethis::use_vignette("Vignette name")</code>
</li>
</ul>
</details></li>
</ol>
</section>
<section id="task-1.2---setup-github-repository-for-your-groups-r-package" class="level4">
<h4 class="anchored" data-anchor-id="task-1.2---setup-github-repository-for-your-groups-r-package">Task 1.2 - Setup GitHub Repository for your group’s R package</h4>
<p>During the previous class, you have been using a combination of console and terminal to set up GitHub. This week, you will solely be using the console.</p>
<p><strong>Still only the first team member</strong></p>
<ol type="1">
<li>Go to <a href="https://github.com/rforbiodatascience24">https://github.com/rforbiodatascience24</a> and go to repositories.</li>
<li>Click the green <code>New</code> button</li>
<li>Create a new repository called <code>group_X_package</code>. Remember to replace the <strong>X</strong></li>
<li>Select <code>rforbiodatascience24</code> as owner</li>
<li>Make the repository <code>Public</code></li>
<li>Click the green <code>Create repository</code> button</li>
<li>In this new repository, click the <code>settings</code> tab</li>
<li>Click <code>Collaborators and Team</code></li>
<li>Click the green <code>Add people</code> button</li>
<li>Invite the remaining group members</li>
<li>All other team members should now have access to the repository, <strong>but do not create your own project yet.</strong></li>
</ol>
</section>
<section id="task-1.3---connect-your-rstudio-server-project-to-the-github-repository" class="level4">
<h4 class="anchored" data-anchor-id="task-1.3---connect-your-rstudio-server-project-to-the-github-repository">Task 1.3 - Connect your RStudio Server Project to the GitHub Repository</h4>
<p><strong>Still only the first team member</strong></p>
<ol type="1">
<li>Find your <code>PAT</code> key or create a new
<details>
<summary>
How to create a new one
</summary>
<ul>
<li>
Type in the console <code>usethis::create_github_token()</code>. You’re going to be redirected to GitHub website.
</li><li>
In case you did that step manually, remember to give permission to access your repositories.
</li><li>
You need to type your password. Don’t change the default settings of creating the token except for the description – set ‘RStudio Server’ or something similar. Then hit Generate token.
</li><li>
Copy the generated token (should start with ghp_) and store it securely (e.g., in a password manager). Do not keep it in a plain file.
</li></ul>
</details></li>
<li>Go back to the RStudio Server project</li>
<li>Type in the console <code>gitcreds::gitcreds_set()</code> and paste the <code>PAT</code> key</li>
<li>Stage all files (in the <code>git</code> window in the top right) by ticking all boxes under <code>Staged</code></li>
<li>Still in the console, run the following commands. Replace your group number and use your GitHub username and email. You run these to link your project to the GitHub repository you created. Remember to replace the <strong>X</strong>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_remote</span>(<span class="at">name =</span> <span class="st">"origin"</span>, <span class="st">"https://github.com/rforbiodatascience24/group_X_package.git"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>) <span class="co"># Remember to replace the X</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">"USERNAME"</span>, <span class="at">user.email =</span> <span class="st">"USEREMAIL@EXAMPLE.ORG"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>gert<span class="sc">::</span><span class="fu">git_commit_all</span>(<span class="st">"Package setup"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>gert<span class="sc">::</span><span class="fu">git_push</span>(<span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>All other team members</strong></p>
<p><em>After your teammate has pushed to GitHub.</em></p>
<ol type="1">
<li>In the RStudio Server, create a new project based on the GitHub Repository just created by your teammate.
<ul>
<li>Click <code>Create a project</code><img src="images/L08_create.png" class="img-fluid" style="width:5.0%"> in the top left.</li>
<li>Choose <code>Version Control</code> and then <code>Git</code>.</li>
<li>Paste in the repository URL: <code>https://github.com/rforbiodatascience24/group_X_package.git</code>. Remember to replace the <strong>X</strong>.</li>
<li>Give the directory a fitting name and click <code>Create Project</code>.</li>
</ul></li>
<li>Find your <code>PAT</code> key or create a new
<details>
<summary>
How to create a new one
</summary>
<ul>
<li>
Type in the console <code>usethis::create_github_token()</code>. You’re going to be redirected to GitHub website.
</li><li>
In case you did it manually, remember to give permission to access your repositories.
</li><li>
You need to type your password. Don’t change the default settings of creating the token except for the description – set ‘RStudio Server’ or something similar. Then hit Generate token.
</li><li>
Copy the generated token (should start with ghp_) and store it securely (e.g.&nbsp;in password manager). Do not keep it in a plain file.
</li></ul>
</details></li>
<li>Go back to the RStudio Server project</li>
<li>Type in the console <code>gitcreds::gitcreds_set()</code> and paste the <code>PAT</code> key</li>
<li>Still in the console, run the following commands. Replace your GitHub username and email.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">"USERNAME"</span>, <span class="at">user.email =</span> <span class="st">"USEREMAIL@EXAMPLE.ORG"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>If RStudio at any point asks you to log in to GitHub, redo step 4 and 5.</strong></p>
<p>Now you are ready to work on the R package.</p>
</section>
</section>
<section id="task-2---build-the-package" class="level3">
<h3 class="anchored" data-anchor-id="task-2---build-the-package">Task 2 - Build the package</h3>
<hr>
<p>Each team member should build and implement their own function. The code will be given, but you will be asked to come up with a name for your function and many of the variables, so discuss in the team what naming convention you want to use. Do you want to use <code>snake_case</code> (common in tidyverse) or <code>camelCase</code> (common in Bioconductor)? It doesn’t really matter, but be consistent.</p>
<p><br></p>
<section id="task-2.1---incorporate-data" class="level4">
<h4 class="anchored" data-anchor-id="task-2.1---incorporate-data">Task 2.1 - Incorporate data</h4>
<p>In this task you will include the following codon table in your package.</p>
<p><strong>This task should be done by one team member</strong>. The rest should follow along.</p>
<ol type="1">
<li>Below is a standard codon table. In the console, store the table in an R object with a name of your own choosing.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"UUU"</span> <span class="ot">=</span> <span class="st">"F"</span>, <span class="st">"UCU"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAU"</span> <span class="ot">=</span> <span class="st">"Y"</span>, <span class="st">"UGU"</span> <span class="ot">=</span> <span class="st">"C"</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUC"</span> <span class="ot">=</span> <span class="st">"F"</span>, <span class="st">"UCC"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAC"</span> <span class="ot">=</span> <span class="st">"Y"</span>, <span class="st">"UGC"</span> <span class="ot">=</span> <span class="st">"C"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUA"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"UCA"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAA"</span> <span class="ot">=</span> <span class="st">"_"</span>, <span class="st">"UGA"</span> <span class="ot">=</span> <span class="st">"_"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUG"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"UCG"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAG"</span> <span class="ot">=</span> <span class="st">"_"</span>, <span class="st">"UGG"</span> <span class="ot">=</span> <span class="st">"W"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUU"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCU"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAU"</span> <span class="ot">=</span> <span class="st">"H"</span>, <span class="st">"CGU"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUC"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCC"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAC"</span> <span class="ot">=</span> <span class="st">"H"</span>, <span class="st">"CGC"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUA"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCA"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAA"</span> <span class="ot">=</span> <span class="st">"Q"</span>, <span class="st">"CGA"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUG"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCG"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAG"</span> <span class="ot">=</span> <span class="st">"Q"</span>, <span class="st">"CGG"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUU"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACU"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAU"</span> <span class="ot">=</span> <span class="st">"N"</span>, <span class="st">"AGU"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUC"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACC"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAC"</span> <span class="ot">=</span> <span class="st">"N"</span>, <span class="st">"AGC"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUA"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACA"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAA"</span> <span class="ot">=</span> <span class="st">"K"</span>, <span class="st">"AGA"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUG"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"ACG"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAG"</span> <span class="ot">=</span> <span class="st">"K"</span>, <span class="st">"AGG"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUU"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCU"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAU"</span> <span class="ot">=</span> <span class="st">"D"</span>, <span class="st">"GGU"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUC"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCC"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAC"</span> <span class="ot">=</span> <span class="st">"D"</span>, <span class="st">"GGC"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUA"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCA"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAA"</span> <span class="ot">=</span> <span class="st">"E"</span>, <span class="st">"GGA"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUG"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCG"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAG"</span> <span class="ot">=</span> <span class="st">"E"</span>, <span class="st">"GGG"</span> <span class="ot">=</span> <span class="st">"G"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Run <code>usethis::use_data(NAME_OF_YOUR_OBJECT, overwrite = TRUE, internal = TRUE)</code></li>
<li>You have now made the data available to our functions, but we also want to make it visible for our users.
<ul>
<li>Run <code>usethis::use_data(NAME_OF_YOUR_OBJECT, overwrite = TRUE)</code>.</li>
</ul></li>
<li>Write a data manual (document the data).
<ul>
<li>All non-internal data should be documented in a <code>data.R</code> file in the <code>R</code> folder. Create it with <code>usethis::use_r("data")</code></li>
<li>Add the following scaffold to <code>R/data.R</code> and write a <em>very</em> brief description of the data (see an example <a href="https://r-pkgs.org/data.html#documenting-data">here</a>). Don’t spend a lot of time here.</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Title</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Description</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @source \url{https://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi?chapter=tgencodes#SG1}</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">"NAME_OF_YOUR_OBJECT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Normally, you should also describe how the raw data was cleaned. You would do that in the file that opens after running <code>usethis::use_data_raw( name = "NAME_OF_YOUR_OBJECT", open = TRUE )</code>, but that is less relevant here, so we will skip that part.</p>
<p>Your package now includes some data.</p>
<p>Restart R, clean your Environment (small broom in the Environment tab), run the three lines of code from <a href="./primer_r_packages.html#pkgwf">The Package Workflow</a> section:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>rstudioapi<span class="sc">::</span><span class="fu">documentSaveAll</span>()  <span class="co"># Saves all you files</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()  <span class="co"># Writes all your manuals for you</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()  <span class="co"># Simulates library("your package"), allowing you to use your functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And run <code>?NAME_OF_YOUR_OBJECT</code>. <strong>OBS</strong> For some unknown reason, this does not work on the current R version (4.3.1). Instead, you can click the “Build” tab next to the “Git” tab and then “install”. After installing and attaching, your manual should pop up. Try printing the object as well to see what it looks like <code>print(NAME_OF_YOUR_OBJECT)</code>.</p>
<p>Push your changes to GitHub. <strong>The other team members</strong> pull the changes to have the data available to you as well.</p>
<p><br></p>
</section>
<section id="task-2.2---implement-functions" class="level4">
<h4 class="anchored" data-anchor-id="task-2.2---implement-functions">Task 2.2 - Implement functions</h4>
<p>In this task you will be working individually to implement a function each. If you are fewer in the team than the number of functions. The quickest to finish can implement the remaining, or separate them out as you see fit.</p>
<p>If you want an additional challenge, each team member can create their own Git branch <code>gert::git_branch_checkout("NAME_OF_BRANCH")</code> and work there. When done, merge your branch with the main branch. That is a more clean and ‘proper’ workflow, but completely optional.</p>
<p>If you are in doubt what the underlying functions do, run <code>?function_name</code> to get a hint about their purpose. <strong>OBS</strong> For some unknown reason, this does not work on the current R version (4.3.1). As mentioned with the data, you can install your package, and then load the manual. Also, remember the functions are replicating the central dogma. Let that inspire you, when naming the functions and variables. If you get stuck, ask your teammates about their functions.</p>
<p>Function five is a bit more involved. Do it together or help your teammate out if it causes problems.</p>
<p>For each function (found below), complete the following steps:</p>
<ol type="1">
<li>Look carefully at your function. Choose a fitting name for it</li>
<li>Run <code>usethis::use_r("function_name")</code> to create an <code>.R</code> file for the function</li>
<li>Paste in the function and rename all places it says <code>name_me</code> with fitting names</li>
<li>Click somewhere in the function. In the toolbar at the very top of the page, choose <code>Code</code> and click <code>Insert Roxygen Skeleton</code></li>
<li>Fill out the function documentation
<ul>
<li>Give the function a title</li>
<li>Do not write anything after <code>@export</code></li>
<li>The parameters should have the format: <code>@param param_name description of parameter</code></li>
<li>The return has the format: <code>@return description of function output</code></li>
<li>Examples can span multiple lines and what you write will be run, so make it runnable.</li>
<li><strong>Important!</strong> Either fill out everything or delete what you don’t. Otherwise, the package check will fail (Do <strong>not</strong> delete <code>@export</code> for these functions).</li>
</ul></li>
<li>Run the three lines of codes from <a href="./primer_r_packages.html#pkgwf">The Package Workflow</a> section</li>
</ol>
<ul>
<li>If at this point, you get a warning that <code>NAMESPACE</code> already exists, delete it and try again.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>rstudioapi<span class="sc">::</span><span class="fu">documentSaveAll</span>()  <span class="co"># Saves all you files</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()  <span class="co"># Writes all your manuals for you</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()  <span class="co"># Simulates library("your package"), allowing you to use your functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>View your function documentation with <code>?function_name</code></li>
<li>Defining a test or a series of tests around your newly created function ensures future corrections will not yield undesired results. Create such a test for your function. Run <code>usethis::use_test("function_name")</code> and write a test. Draw some inspiration from <a href="https://r-pkgs.org/tests.html#test-structure">here</a> or from running <code>?testthat::expect_equal</code>.
<ul>
<li><strong>Skip this step for function five</strong>. Instead, write inline code comments for each chunk of code. Press <code>Cmd+Shift+c</code> / <code>Ctrl+Shift+C</code> to comment your currently selected line.</li>
</ul></li>
<li>Rerun the three lines from The Package Workflow section and check that the package works with <code>devtools::check()</code>
<ul>
<li><details>
<summary>
Briefly about check
</summary>
<code>devtools::check()</code> will check every aspect of your package and run the tests you created. You will likely get some warnings or notes like ‘No visible binding for global variables’. They are often harmless, but, if you like, you can get rid of them as described <a href="https://www.r-bloggers.com/2019/08/no-visible-binding-for-global-variable/">here</a>. The check will tell you what might cause problems with your package and often also how to fix it. If there are any errors, fix those. Warnings and notes are also good to address. Feel free to do that if any pops up.
</details></li>
</ul></li>
<li>If it succeeds without errors, push your changes to GitHub
<ul>
<li>If you decided to create branches review <a href="lab07.qm#your-first-branch-merging">last week’s exercises</a> for guidance</li>
<li>Always pull before pushing</li>
<li>Use the RStudio GUI if you prefer</li>
<li>Remember to pull first</li>
<li>If you chose to create your own branch, <a href="https://www.w3schools.com/git/git_branch_merge.asp">merge it with master/main</a>.</li>
</ul></li>
</ol>
<details>
<summary>
Function one
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"T"</span>, <span class="st">"G"</span>, <span class="st">"C"</span>), <span class="at">size =</span> name_me2, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  name_me4 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(name_me3, <span class="at">collapse =</span> <span class="st">""</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me4)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function two
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"T"</span>, <span class="st">"U"</span>, name_me2)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me3)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function three
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2, <span class="at">start =</span> <span class="dv">1</span>){</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">nchar</span>(name_me2)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  codons <span class="ot">&lt;-</span> <span class="fu">substring</span>(name_me2,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">first =</span> <span class="fu">seq</span>(<span class="at">from =</span> start, <span class="at">to =</span> name_me3<span class="dv">-3</span><span class="sc">+</span><span class="dv">1</span>, <span class="at">by =</span> <span class="dv">3</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">last =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">3</span><span class="sc">+</span>start<span class="dv">-1</span>, <span class="at">to =</span> name_me3, <span class="at">by =</span> <span class="dv">3</span>))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(codons)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function four
</summary>
<p><code>NAME_OF_YOUR_OBJECT</code> refers to the codon table you stored in Task 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>name_me <span class="ot">&lt;-</span> <span class="cf">function</span>(codons){</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  name_me2 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(NAME_OF_YOUR_OBJECT[codons], <span class="at">collapse =</span> <span class="st">""</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me2)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function five
</summary>
<p>This function will be the first to use dependencies. As a reminder, a dependency is a package that your package depends on. In this case, it will be <code>stringr</code> and <code>ggplot2</code>. They are already installed, so you don’t need to do that. The best way to add these packages to your own is to first add them to your package dependencies with <code>usethis::use_package("package_name")</code>. If you care about reproducibility, you can add <code>min_version = TRUE</code> to the function call to specify a required minimum package version of the dependency. Run <code>usethis::use_package</code> for both dependencies.</p>
<p>For the <code>ggplot2</code> functions, we will use <code>ggplot2::function_name</code> everywhere a <code>ggplot2</code> function is used. Also add <code>@import ggplot2</code> to the function description (this is often done with <code>ggplot2</code> because it has a lot of useful plotting functions with only rare name overlaps). If you want to be more precise, add <code>@importFrom ggplot2 ggplot aes geom_col theme_bw theme</code> instead. The same applies for <code>stringr</code>, but since we only use a few functions, add <code>@importFrom stringr str_split boundary str_count</code> to the function description.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> name_me2 <span class="sc">|&gt;</span>  </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">pattern =</span> stringr<span class="sc">::</span><span class="fu">boundary</span>(<span class="st">"character"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  counts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(name_me3, <span class="cf">function</span>(amino_acid) stringr<span class="sc">::</span><span class="fu">str_count</span>(<span class="at">string =</span> name_me2, <span class="at">pattern =</span>  amino_acid)) <span class="sc">|&gt;</span>  </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Counts"</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  counts[[<span class="st">"Name_me2"</span>]] <span class="ot">&lt;-</span> <span class="fu">rownames</span>(counts)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  name_me4 <span class="ot">&lt;-</span> counts <span class="sc">|&gt;</span>  </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> Name_me2, <span class="at">y =</span> Counts, <span class="at">fill =</span> Name_me2)) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me4)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="task-3---group-discussion" class="level3">
<h3 class="anchored" data-anchor-id="task-3---group-discussion">Task 3 - Group discussion</h3>
<ol type="1">
<li>Describe each function to each other in order - both what it does and which names you gave them and their variables.</li>
<li>The person(s) responsible for function five, describe how you added the two packages as dependencies.</li>
<li>Discuss why it is a good idea to limit the number of dependencies your package has. When can’t it always be avoided?</li>
<li>Discuss the difference between adding an <code>@importFrom package function</code> tag to a function description compared to using <code>package::function()</code>. Read <a href="https://r-pkgs.org/namespace.html#imports">this section</a> if you are not sure or just want to learn more.</li>
</ol>
</section>
</section>
<section id="group-assignment-important-see-how-to" class="level2">
<h2 class="anchored" data-anchor-id="group-assignment-important-see-how-to"><span style="color: red;">GROUP ASSIGNMENT</span> (Important, see: <a href="./assignments.html">how to</a>)</h2>
<hr>
<p>For this week’s group assignment, write a vignette (user guide) for your package (<strong>max</strong> 2 pages). The vignette should include a brief description of what the package is about and demonstrate how each function in the package is used (individually and in conjunction with each other). As a final section, discuss use cases for the package and what other functions could be included. Also include the main points from your discussion in Task 3.</p>
<p>Include a link to your group’s GitHub repository at the top of the vignette. Hand it in as a pdf in DTU Learn.</p>
<ol type="1">
<li>Create a vignette with <code>usethis::use_vignette("your_package_name")</code>.</li>
<li>When you are done writing it, run <code>devtools::build_vignettes()</code>.</li>
<li>At the top line of your vignette, change <code>rmarkdown::html_vignette</code> to <code>rmarkdown::pdf_document</code></li>
<li>Rerun <code>devtools::build_vignettes()</code> - the created pdf-file in the <code>doc</code> folder is the document to hand it.</li>
<li>Lastly, duplicate the vignette as the GitHub README
<ul>
<li>Create a README with <code>usethis::use_readme_rmd( open = TRUE )</code>.</li>
<li>Copy the content of the vignette Rmarkdown into the readme <strong>Keep the top part of the README as is</strong>. If you overwrote it anyway, change <code>rmarkdown::pdf_document</code> to <code>rmarkdown::github_document</code>.</li>
<li>Run <code>devtools::build_readme()</code></li>
<li>Push the changes to GitHub.</li>
</ul></li>
</ol>
<section id="last-tip-on-packages" class="level3">
<h3 class="anchored" data-anchor-id="last-tip-on-packages">Last tip on packages</h3>
<hr>
<p>Next week, I will introduce the <code>golem</code> package for building <a href="https://engineering-shiny.org/index.html">production-grade Shiny apps</a>. However, I personally also use it to quickly get going with packages.</p>
<p>When starting out with an R package, it may seem complicated with a lot of things to remember. <code>golem</code> remembers these things for you. When setting up your package / Shiny app with <code>golem::create_golem("Name of your awesome package/app")</code>, it creates a <code>dev</code> folder with a few files listing all you need to get started with an R package.</p>
<p>It does also give you a lot of other things that you will rarely use, and it also sets up some basic structures for Shiny apps. These can simply be deleted if you are not also building a Shiny app (which you will next week).</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab07.html" class="pagination-link" aria-label="Lab 7: Collaborative Bio Data Science using GitHub via RStudio">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Lab 7: Collaborative Bio Data Science using GitHub via RStudio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lab09.html" class="pagination-link" aria-label="Lab 9 Creating a Simple Shiny Application">
        <span class="nav-page-text">Lab 9 Creating a Simple Shiny Application</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>R for Bio Data Science</p>
</div>   
    <div class="nav-footer-center">
<p>All content © 2023 - 2025 Leon Eyrich Jessen. All rights reserved</p>
</div>
    <div class="nav-footer-right">
<p>Full course description available at <a href="https://kurser.dtu.dk/course/22100">DTU Course Base</a>.</p>
</div>
  </div>
</footer>




</body></html>