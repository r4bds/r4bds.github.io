<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Bio Data Science - Lab 8: Creating a Simple R-package</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab09.html" rel="next">
<link href="./lab07.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Lab 8: Creating a Simple R-package</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Bio Data Science</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome to R for Bio Data Science</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prologue.html" class="sidebar-item-text sidebar-link">Prologue</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting_started.html" class="sidebar-item-text sidebar-link">Getting Started</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./lab00.html" class="sidebar-item-text sidebar-link">Course Labs</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab01.html" class="sidebar-item-text sidebar-link">Lab 1: Course Intro &amp; the Very Basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab02.html" class="sidebar-item-text sidebar-link">Lab 2: Data Visualisation I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab03.html" class="sidebar-item-text sidebar-link">Lab 3: Data Visualisation II</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab04.html" class="sidebar-item-text sidebar-link">Lab 4: Data Wrangling I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab05.html" class="sidebar-item-text sidebar-link">Lab 5: Data Wrangling II</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab06.html" class="sidebar-item-text sidebar-link">Lab 6: Applying Functional Programming with Purrr to Models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab07.html" class="sidebar-item-text sidebar-link">Lab 7: Collaborative Bio Data Science using GitHub via RStudio</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab08.html" class="sidebar-item-text sidebar-link active">Lab 8: Creating a Simple R-package</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab09.html" class="sidebar-item-text sidebar-link">Lab 9 Creating a Simple Shiny Application</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab10.html" class="sidebar-item-text sidebar-link">Lab 10 Project Startup &amp; Industry Talks</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./resources.html" class="sidebar-item-text sidebar-link">Resources</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./paths_and_projects.html" class="sidebar-item-text sidebar-link">Paths &amp; Projects</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variable_assignment_in_r.html" class="sidebar-item-text sidebar-link">Variable Assignment in <code>R</code></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_styling.html" class="sidebar-item-text sidebar-link">Code Styling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_on_linear_models_in_r.html" class="sidebar-item-text sidebar-link">Primer on Linear Models in <code>R</code></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./primer_on_r_packages.html" class="sidebar-item-text sidebar-link">Primer on R package development</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external_resources.html" class="sidebar-item-text sidebar-link">External Resources</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./course_elements.html" class="sidebar-item-text sidebar-link">Course Elements</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignments.html" class="sidebar-item-text sidebar-link">Assignments</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_description.html" class="sidebar-item-text sidebar-link">Project Description</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_faq.html" class="sidebar-item-text sidebar-link">Project FAQ</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exam.html" class="sidebar-item-text sidebar-link">Exam</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Package(s)</a></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#learning-materials" id="toc-learning-materials" class="nav-link" data-scroll-target="#learning-materials">Learning Materials</a></li>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning Objectives</a></li>
  <li><a href="#sec-exercises" id="toc-sec-exercises" class="nav-link" data-scroll-target="#sec-exercises">Exercises</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks">TASKS</a></li>
  <li><a href="#task-1---setting-up-the-r-package" id="toc-task-1---setting-up-the-r-package" class="nav-link" data-scroll-target="#task-1---setting-up-the-r-package">Task 1 - Setting up the R package</a></li>
  <li><a href="#task-2---build-the-package" id="toc-task-2---build-the-package" class="nav-link" data-scroll-target="#task-2---build-the-package">Task 2 - Build the package</a></li>
  <li><a href="#task-3---group-discussion" id="toc-task-3---group-discussion" class="nav-link" data-scroll-target="#task-3---group-discussion">Task 3 - Group discussion</a></li>
  </ul></li>
  <li><a href="#group-assignment" id="toc-group-assignment" class="nav-link" data-scroll-target="#group-assignment"><span style="color: red;">GROUP ASSIGNMENT</span></a>
  <ul class="collapse">
  <li><a href="#last-tip-on-packages" id="toc-last-tip-on-packages" class="nav-link" data-scroll-target="#last-tip-on-packages">Last tip on packages</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Lab 8: Creating a Simple R-package</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Package(s)</h2>
<ul>
<li><a href="https://github.com/r-lib/devtools">devtools</a></li>
<li><a href="https://devtools.r-lib.org">usethis</a></li>
<li><a href="https://roxygen2.r-lib.org">roxygen2</a></li>
<li><a href="https://testthat.r-lib.org">testthat</a></li>
<li><a href="https://rdrr.io/cran/gert/">gert</a></li>
</ul>
</section>
<section id="schedule" class="level2">
<h2 class="anchored" data-anchor-id="schedule">Schedule</h2>
<ul>
<li>08.00 - 08.15: Assignment walk-through</li>
<li>08.15 - 08.45: <a href="https://raw.githack.com/r4bds/r4bds.github.io/main/lecture_lab08.html">Lecture</a></li>
<li>08.45 - 09.00: Break</li>
<li>09.00 - 12.00: <a href="#sec-exercises">Exercises</a></li>
</ul>
</section>
<section id="learning-materials" class="level2">
<h2 class="anchored" data-anchor-id="learning-materials">Learning Materials</h2>
<p><em>Please prepare the following materials:</em></p>
<ul>
<li><a href="./primer_on_r_packages.html">Primer on R Packages</a></li>
<li>Cheatsheet: <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/package-development.pdf">Package development with devtools</a> – When in doubt, check here first</li>
<li>Web: <a href="https://www.datacamp.com/community/tutorials/r-packages-guide">R Packages: A Beginner’s Tutorial</a> – Read this before class</li>
<li>Web: <a href="https://support.rstudio.com/hc/en-us/articles/200486488-Developing-Packages-with-RStudio">Developing Packages with RStudio</a> – Creating an R Package with RStudio</li>
<li>Web: <a href="https://kbroman.org/pkg_primer/">R package primer a minimal tutorial</a> – Brief but comprehensive R Package tutorial</li>
<li>Book: <a href="https://r-pkgs.org/introduction.html">R Packages - 1 Introduction</a> – Everything you need to know about R Packages</li>
</ul>
</section>
<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning Objectives</h2>
<p><em>A student who has met the objectives of the session will be able to:</em></p>
<ul>
<li>Prepare a simple R package for distributing documented functions</li>
<li>Explain the terms Repository, Dependencies, and Namespace</li>
<li>Implement testing in an R package</li>
<li>Collaboratively work on an R package on GitHub</li>
</ul>
</section>
<section id="sec-exercises" class="level2">
<h2 class="anchored" data-anchor-id="sec-exercises">Exercises</h2>
<p><em>Read the steps of this exercises carefully while completing them</em></p>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>The aim of these exercises is to set up a collaborative coding project using GitHub and collaborate on creating a simple R package that replicates the central dogma of molecular biology.</p>
<p>The exercises will build upon what you learned in <a href="./lab07.html">Lab 7</a> and its <a href="./lab07.html#sec-exercises">exercises</a>. But don’t worry too much, the setup steps will be given here as well.</p>
<hr>
</section>
<section id="tasks" class="level3">
<h3 class="anchored" data-anchor-id="tasks">TASKS</h3>
<p>If you haven’t read the <a href="./primer_on_r_packages.html">Primer on R packages</a> yet, consider reading it now.</p>
</section>
<section id="task-1---setting-up-the-r-package" class="level3">
<h3 class="anchored" data-anchor-id="task-1---setting-up-the-r-package">Task 1 - Setting up the R package</h3>
<p>In the first task, <strong>one team member</strong> (you decide who) will initiate a package project and push it to Github. Then, when instructed, the <strong>remaining group members</strong> will connect to that repository, and the real package building will begin.</p>
<section id="task-1.1---create-r-package" class="level4">
<h4 class="anchored" data-anchor-id="task-1.1---create-r-package">Task 1.1 - Create R Package</h4>
<ol type="1">
<li>Go to <a href="https://teaching.healthtech.dtu.dk/22100/rstudio.php">R for Bio Data Science RStudio Server</a> and login.</li>
<li>Click <code>Create a project</code><img src="images/L08_create.png" class="img-fluid" style="width:5.0%"> in the top left and choose <code>New Directory</code>.</li>
<li>Select <code>R Package</code> and pick a fitting Package name.
<ul>
<li>The package you will create will replicate the central dogma of molecular biology. Let that inspire you</li>
<li>Look up naming rules <a href="https://r-pkgs.org/workflow101.html#name-your-package">here</a></li>
<li>The most important rule: <code>_</code>, <code>-</code>, and <code>'</code> are not allowed.</li>
</ul></li>
<li>Tick the “Create git repository” box.</li>
<li>Click “Create project”.</li>
</ol>
<p>RStudio will now create an R project for you that contains all necessary files and folders.</p>
<ol start="6" type="1">
<li>Open the <code>DESCRIPTION</code> file and write a title for your package, a small description, and add authors.</li>
</ol>
<ul>
<li>When adding authors, the format is:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Authors<span class="sc">@</span>R<span class="sc">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">person</span>(<span class="at">given =</span> <span class="st">"firstname"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"lastname"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">role =</span> <span class="fu">c</span>(<span class="st">"aut"</span>, <span class="st">"cre"</span>), <span class="co"># There must be a "cre", but there can only be one</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">email =</span> <span class="st">"your@email.com"</span>), </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">person</span>(<span class="at">given =</span> <span class="st">"firstname"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"lastname"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">role =</span> <span class="st">"aut"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">email =</span> <span class="st">"your@email.com"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>Create an MIT license (from the console) <code>usethis::use_mit_license("Group name")</code></li>
<li><em>If you didn’t tick the “Create git repository”</em>: Run <code>usethis::use_git()</code>. <em>If the “Git” tab is not in the lower left panel</em>: reopen the R project.</li>
<li><details>
<summary>
<strong>Optional</strong> setup steps (generally good, but not essential for this course)
</summary>
<ul>
<li>
Add a Readme file <code>usethis::use_readme_rmd( open = FALSE )</code>. You will do that in the Group Assignment later
</li>
<li>
Add a lifecycle badge: <code>usethis::use_lifecycle_badge( "Experimental" )</code>
</li>
<li>
Write vignettes: <code>usethis::use_vignette("Vignette name")</code>
</li>
</ul>
</details></li>
</ol>
</section>
<section id="task-1.2---setup-github-repository-for-your-groups-r-package" class="level4">
<h4 class="anchored" data-anchor-id="task-1.2---setup-github-repository-for-your-groups-r-package">Task 1.2 - Setup GitHub Repository for your group’s R package</h4>
<p>During the previous class, you have been using a combination of console and terminal to set up GitHub. This week, you will solely be using the console.</p>
<p><strong>Still only the first team member</strong></p>
<ol type="1">
<li>Go to <a href="https://github.com/rforbiodatascience23">https://github.com/rforbiodatascience23</a></li>
<li>Click the green <code>New</code>-button</li>
<li>Create a new repository called <code>group_X_package</code>. Remember to replace the <strong>X</strong></li>
<li>Select <code>rforbiodatascience23</code> as owner</li>
<li>Make the repository <code>Public</code></li>
<li>Click the green <code>Create repository</code>-button</li>
<li>In this new repository, click the <code>settings</code> tab</li>
<li>Click <code>Collaborators and Team</code></li>
<li>Click the green <code>Add people</code>-button</li>
<li>Invite the remaining group members</li>
<li>All other team members should now have access to the repository, <strong>but do not create your own project yet.</strong></li>
</ol>
</section>
<section id="task-1.3---connect-your-rstudio-server-project-to-the-github-repository" class="level4">
<h4 class="anchored" data-anchor-id="task-1.3---connect-your-rstudio-server-project-to-the-github-repository">Task 1.3 - Connect your RStudio Server Project to the GitHub Repository</h4>
<p><strong>Still only the first team member</strong></p>
<ol type="1">
<li>Find your <code>PAT</code> key or create a new
<details>
<summary>
How to create a new one
</summary>
<ul>
<li>
Type in the console <code>usethis::create_github_token()</code>. You’re going to be redirected to GitHub website.
</li><li>
In case you did that step manually, remember to give permission to access your repositories.
</li><li>
You need to type your password. Don’t change the default settings of creating the token except for the description – set ‘RStudio Server’ or something similar. Then hit Generate token.
</li><li>
Copy the generated token (should start with ghp_) and store it securely (e.g., in a password manager). Do not keep it in a plain file.
</li></ul>
</details></li>
<li>Go back to the RStudio Server project</li>
<li>Type in the console <code>gitcreds::gitcreds_set()</code> and paste the <code>PAT</code> key</li>
<li>Stage all files (in the <code>git</code> window in the top right) by ticking all boxes under <code>Staged</code></li>
<li>Still in the console, run the following commands. Replace your group number and use your GitHub username and email. You run these to link your project to the GitHub repository you created. Remember to replace the <strong>X</strong>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_remote</span>(<span class="at">name =</span> <span class="st">"origin"</span>, <span class="st">"https://github.com/rforbiodatascience23/group_X_package.git"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>) <span class="co"># Remember to replace the X</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">"USERNAME"</span>, <span class="at">user.email =</span> <span class="st">"USEREMAIL@EXAMPLE.ORG"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>gert<span class="sc">::</span><span class="fu">git_commit_all</span>(<span class="st">"Package setup"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>gert<span class="sc">::</span><span class="fu">git_push</span>(<span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>All other team members</strong></p>
<p><em>After your teammate has pushed to GitHub.</em></p>
<ol type="1">
<li>In the RStudio Server, create a new project based on the GitHub Repository just created by your teammate.
<ul>
<li>Click <code>Create a project</code><img src="images/L08_create.png" class="img-fluid" style="width:5.0%"> in the top left.</li>
<li>Choose <code>Version Control</code> and then <code>Git</code>.</li>
<li>Paste in the repository URL: <code>"https://github.com/rforbiodatascience23/group_X_package.git"</code>. Remember to replace the <strong>X</strong>.</li>
<li>Give the directory a fitting name and click <code>Create Project</code>.</li>
</ul></li>
<li>Find your <code>PAT</code> key or create a new
<details>
<summary>
How to create a new one
</summary>
<ul>
<li>
Type in the console <code>usethis::create_github_token()</code>. You’re going to be redirected to GitHub website.
</li><li>
In case you did it manually, remember to give permission to access your repositories.
</li><li>
You need to type your password. Don’t change the default settings of creating the token except for the description – set ‘RStudio Server’ or something similar. Then hit Generate token.
</li><li>
Copy the generated token (should start with ghp_) and store it securely (e.g.&nbsp;in password manager). Do not keep it in a plain file.
</li></ul>
</details></li>
<li>Go back to the RStudio Server project</li>
<li>Type in the console <code>gitcreds::gitcreds_set()</code> and paste the <code>PAT</code> key</li>
<li>Still in the console, run the following commands. Replace your GitHub username and email.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">"USERNAME"</span>, <span class="at">user.email =</span> <span class="st">"USEREMAIL@EXAMPLE.ORG"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>If RStudio at any point asks you to log in to GitHub, redo step 4 and 5.</strong></p>
<p>Now you are ready to work on the R package.</p>
</section>
</section>
<section id="task-2---build-the-package" class="level3">
<h3 class="anchored" data-anchor-id="task-2---build-the-package">Task 2 - Build the package</h3>
<hr>
<p>Each team member should build and implement their own function. The code will be given, but you will be asked to come up with a name for your function and many of the variables, so discuss in the team what naming convention you want to use. Do you want to use <code>snake_case</code> (common in tidyverse) or <code>camelCase</code> (common in Bioconductor)? It doesn’t really matter, but be consistent.</p>
<p><br></p>
<section id="task-2.1---incorporate-data" class="level4">
<h4 class="anchored" data-anchor-id="task-2.1---incorporate-data">Task 2.1 - Incorporate data</h4>
<p>In this task you will include the following codon table in your package.</p>
<p><strong>This task should be done by one team member</strong>. The rest should follow along.</p>
<ol type="1">
<li>Below is a standard codon table. Store it in an object with a name of your own choosing.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"UUU"</span> <span class="ot">=</span> <span class="st">"F"</span>, <span class="st">"UCU"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAU"</span> <span class="ot">=</span> <span class="st">"Y"</span>, <span class="st">"UGU"</span> <span class="ot">=</span> <span class="st">"C"</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUC"</span> <span class="ot">=</span> <span class="st">"F"</span>, <span class="st">"UCC"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAC"</span> <span class="ot">=</span> <span class="st">"Y"</span>, <span class="st">"UGC"</span> <span class="ot">=</span> <span class="st">"C"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUA"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"UCA"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAA"</span> <span class="ot">=</span> <span class="st">"_"</span>, <span class="st">"UGA"</span> <span class="ot">=</span> <span class="st">"_"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UUG"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"UCG"</span> <span class="ot">=</span> <span class="st">"S"</span>, <span class="st">"UAG"</span> <span class="ot">=</span> <span class="st">"_"</span>, <span class="st">"UGG"</span> <span class="ot">=</span> <span class="st">"W"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUU"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCU"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAU"</span> <span class="ot">=</span> <span class="st">"H"</span>, <span class="st">"CGU"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUC"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCC"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAC"</span> <span class="ot">=</span> <span class="st">"H"</span>, <span class="st">"CGC"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUA"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCA"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAA"</span> <span class="ot">=</span> <span class="st">"Q"</span>, <span class="st">"CGA"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CUG"</span> <span class="ot">=</span> <span class="st">"L"</span>, <span class="st">"CCG"</span> <span class="ot">=</span> <span class="st">"P"</span>, <span class="st">"CAG"</span> <span class="ot">=</span> <span class="st">"Q"</span>, <span class="st">"CGG"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUU"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACU"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAU"</span> <span class="ot">=</span> <span class="st">"N"</span>, <span class="st">"AGU"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUC"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACC"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAC"</span> <span class="ot">=</span> <span class="st">"N"</span>, <span class="st">"AGC"</span> <span class="ot">=</span> <span class="st">"S"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUA"</span> <span class="ot">=</span> <span class="st">"I"</span>, <span class="st">"ACA"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAA"</span> <span class="ot">=</span> <span class="st">"K"</span>, <span class="st">"AGA"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AUG"</span> <span class="ot">=</span> <span class="st">"M"</span>, <span class="st">"ACG"</span> <span class="ot">=</span> <span class="st">"T"</span>, <span class="st">"AAG"</span> <span class="ot">=</span> <span class="st">"K"</span>, <span class="st">"AGG"</span> <span class="ot">=</span> <span class="st">"R"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUU"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCU"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAU"</span> <span class="ot">=</span> <span class="st">"D"</span>, <span class="st">"GGU"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUC"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCC"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAC"</span> <span class="ot">=</span> <span class="st">"D"</span>, <span class="st">"GGC"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUA"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCA"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAA"</span> <span class="ot">=</span> <span class="st">"E"</span>, <span class="st">"GGA"</span> <span class="ot">=</span> <span class="st">"G"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GUG"</span> <span class="ot">=</span> <span class="st">"V"</span>, <span class="st">"GCG"</span> <span class="ot">=</span> <span class="st">"A"</span>, <span class="st">"GAG"</span> <span class="ot">=</span> <span class="st">"E"</span>, <span class="st">"GGG"</span> <span class="ot">=</span> <span class="st">"G"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Run <code>usethis::use_data(NAME_OF_YOUR_OBJECT, overwrite = TRUE, internal = TRUE)</code></li>
<li>You have now made the data available to our functions, but we also want to make it visible for our users.
<ul>
<li>Run <code>usethis::use_data(NAME_OF_YOUR_OBJECT, overwrite = TRUE)</code>.</li>
</ul></li>
<li>Write a data manual (document the data).
<ul>
<li>All non-internal data should be documented in a <code>data.R</code> file in the <code>R</code> folder. Create it with <code>usethis::use_r("data")</code></li>
<li>Add the following scaffold to <code>R/data.R</code> and write a <em>very</em> brief description of the data (see an example <a href="https://r-pkgs.org/data.html#documenting-data">here</a>). Don’t spend a lot of time here.</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Title</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Description</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @source \url{https://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi?chapter=tgencodes#SG1}</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">"NAME_OF_YOUR_OBJECT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Normally, you should also describe how the raw data was cleaned. You would do that in the file that opens after running <code>usethis::use_data_raw( name = "NAME_OF_YOUR_OBJECT", open = TRUE )</code>, but that is less relevant here, so we will skip that part.</p>
<p>Your package now includes some data.</p>
<p>Restart R, clean your Environment (small broom in the Environment tab), run the three lines of code from <a href="./primer_on_r_packages.html#pkgwf">The Package Workflow</a> section, and run <code>?NAME_OF_YOUR_OBJECT</code>. Your manual should pop up. Try printing the object as well to see what it looks like <code>print(NAME_OF_YOUR_OBJECT)</code>.</p>
<p>Push your changes to GitHub. <strong>The other team members</strong> pull the changes to have the data available to you as well.</p>
<p><br></p>
</section>
<section id="task-2.2---implement-functions" class="level4">
<h4 class="anchored" data-anchor-id="task-2.2---implement-functions">Task 2.2 - Implement functions</h4>
<p>In this task you will be working individually to implement a function each. If you are fewer in the team than the number of functions. The quickest to finish can implement the remaining, or separate them out as you see fit.</p>
<p>If you want an additional challenge, each team member can create their own Git branch <code>gert::git_branch_checkout("NAME_OF_BRANCH")</code> and work there. When done, merge your branch with the main branch. That is a more clean and ‘proper’ workflow, but completely optional.</p>
<p>If you are in doubt what the underlying functions do, run <code>?function_name</code> to get a hint about their purpose. Also, remember the functions are replicating the central dogma. Let that inspire you, when naming the functions and variables. If you get stuck, ask your teammates about their functions.</p>
<p>Function five is a bit more involved. Do it together or help your teammate out if it causes problems.</p>
<p>For each function (found below), complete the following steps:</p>
<ol type="1">
<li>Look carefully at your function. Choose a fitting name for it</li>
<li>Run <code>usethis::use_r("function_name")</code> to create an <code>.R</code> file for the function</li>
<li>Paste in the function and rename all places it says <code>name_me</code> with fitting names</li>
<li>Click somewhere in the function. In the toolbar at the very top of the page, choose <code>Code</code> and click <code>Insert Roxygen Skeleton</code></li>
<li>Fill out the function documentation
<ul>
<li>Give the function a title</li>
<li>Do not write anything after <code>@export</code></li>
<li>The parameters should have the format: <code>@param param_name description of parameter</code></li>
<li>The return has the format: <code>@return description of function output</code></li>
<li>Examples can span multiple lines and what you write will be run.</li>
<li><strong>Important!</strong> Either fill out everything or delete what you don’t describe. Otherwise, the package check will fail (Do <strong>not</strong> delete <code>@export</code> for these functions).</li>
</ul></li>
<li>Run the three lines of codes from <a href="./primer_on_r_packages.html#pkgwf">The Package Workflow</a> section</li>
</ol>
<ul>
<li>If at this point, you get a warning that <code>NAMESPACE</code> already exists, delete it and try again.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>rstudioapi<span class="sc">::</span><span class="fu">documentSaveAll</span>()  <span class="co"># Saves all you files</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()  <span class="co"># Writes all your manuals for you</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()  <span class="co"># Simulates library("your package"), allowing you to use your functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>View your function documentation with <code>?function_name</code></li>
<li>Defining a test or a series of tests around your newly created function ensures future corrections will not yield undesired results. Create such a test for your function. Run <code>usethis::use_test("function_name")</code> and write a test. Draw some inspiration from <a href="https://r-pkgs.org/tests.html#test-structure">here</a> or from running <code>?testthat::expect_equal</code>.
<ul>
<li><strong>Skip this step for function five</strong>. Instead, write inline code comments for each chunk of code. Press <code>Cmd+Shift+c</code> / <code>Ctrl+Shift+C</code> to comment your currently selected line.</li>
</ul></li>
<li>Rerun the three lines from The Package Workflow section and check that the package works with <code>devtools::check()</code>
<ul>
<li><details>
<summary>
Briefly about check
</summary>
<code>devtools::check()</code> will check every aspect of your package and run the tests you created. You will likely get some warnings or notes like ‘No visible binding for global variables’. They are often harmless, but, if you like, you can get rid of them as described <a href="https://www.r-bloggers.com/2019/08/no-visible-binding-for-global-variable/">here</a>. The check will tell you what might cause problems with your package and often also how to fix it. If there are any errors, fix those. Warnings and notes are also good to address. Feel free to do that if any pops up.
</details></li>
</ul></li>
<li>If it succeeds without errors, push your changes to GitHub
<ul>
<li>Use the RStudio GUI if you prefer</li>
<li>Remember to pull first</li>
<li>If you chose to create your own branch, <a href="https://www.w3schools.com/git/git_branch_merge.asp">merge it with master/main</a>.</li>
</ul></li>
</ol>
<details>
<summary>
Function one
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"T"</span>, <span class="st">"G"</span>, <span class="st">"C"</span>), <span class="at">size =</span> name_me2, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  name_me4 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(name_me3, <span class="at">collapse =</span> <span class="st">""</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me4)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function two
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"T"</span>, <span class="st">"U"</span>, name_me2)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me3)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function three
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2, <span class="at">start =</span> <span class="dv">1</span>){</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> <span class="fu">nchar</span>(name_me2)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  codons <span class="ot">&lt;-</span> <span class="fu">substring</span>(name_me2,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">first =</span> <span class="fu">seq</span>(<span class="at">from =</span> start, <span class="at">to =</span> name_me3<span class="dv">-3</span><span class="sc">+</span><span class="dv">1</span>, <span class="at">by =</span> <span class="dv">3</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">last =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">3</span><span class="sc">+</span>start<span class="dv">-1</span>, <span class="at">to =</span> name_me3, <span class="at">by =</span> <span class="dv">3</span>))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(codons)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function four
</summary>
<p><code>NAME_OF_YOUR_OBJECT</code> refers to the codon table you stored in Task 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>name_me <span class="ot">&lt;-</span> <span class="cf">function</span>(codons){</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  name_me2 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(NAME_OF_YOUR_OBJECT[codons], <span class="at">collapse =</span> <span class="st">""</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me2)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
Function five
</summary>
<p>This function will be the first to use dependencies. As a reminder, a dependency is a package that your package depends on. In this case, it will be <code>stringr</code> and <code>ggplot2</code>. They are already installed, so you don’t need to do that. The best way to add these packages to your own is to first add them to your package dependencies with <code>usethis::use_package("package_name")</code>. Do that with all three.</p>
<p>For the <code>ggplot2</code> functions, we will use <code>ggplot2::function_name</code> everywhere a <code>ggplot2</code> function is used. Also add <code>@import ggplot2</code> to the function description (this is often done with <code>ggplot2</code> because it has a lot of useful plotting functions with only rare name overlaps). If you want to be more precise, add <code>@importFrom ggplot2 ggplot aes geom_col theme_bw theme</code> instead. The same applies for <code>stringr</code>, but since we only use a few functions, add <code>@importFrom stringr str_split boundary str_count</code> to the function description.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>name_me1 <span class="ot">&lt;-</span> <span class="cf">function</span>(name_me2){</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  name_me3 <span class="ot">&lt;-</span> name_me2 <span class="sc">|&gt;</span>  </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">pattern =</span> stringr<span class="sc">::</span><span class="fu">boundary</span>(<span class="st">"character"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  counts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(name_me3, <span class="cf">function</span>(amino_acid) stringr<span class="sc">::</span><span class="fu">str_count</span>(<span class="at">string =</span> name_me2, <span class="at">pattern =</span>  amino_acid)) <span class="sc">|&gt;</span>  </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Counts"</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  counts[[<span class="st">"Name_me2"</span>]] <span class="ot">&lt;-</span> <span class="fu">rownames</span>(counts)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  name_me4 <span class="ot">&lt;-</span> counts <span class="sc">|&gt;</span>  </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> Name_me2, <span class="at">y =</span> Counts, <span class="at">fill =</span> Name_me2)) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(name_me4)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="task-3---group-discussion" class="level3">
<h3 class="anchored" data-anchor-id="task-3---group-discussion">Task 3 - Group discussion</h3>
<ol type="1">
<li>Describe each function to each other in order - both what it does and which names you gave them and their variables.</li>
<li>The person(s) responsible for function five, describe how you added the three packages as dependencies and included the pipe in the package namespace.</li>
<li>Discuss why it is a good idea to limit the number of dependencies your package has. When can’t it be avoided?</li>
<li>Discuss the difference between adding an <code>@importFrom package function</code> tag to a function description compared to using <code>package::function()</code>. Read <a href="https://r-pkgs.org/namespace.html#imports">this section</a> if you are not sure or just want to learn more.</li>
</ol>
</section>
</section>
<section id="group-assignment" class="level2">
<h2 class="anchored" data-anchor-id="group-assignment"><span style="color: red;">GROUP ASSIGNMENT</span></h2>
<hr>
<p>For this week’s group assignment, write a vignette (user guide) for your package (<strong>max</strong> 2 pages). The vignette should include a brief description of what the package is about and demonstrate how each function in the package is used (individually and in conjunction with each other). As a final section, discuss use cases for the package and what other functions could be included. Also include the main points from your discussion in Task 3.</p>
<p>Include a link to your group’s GitHub repository at the top of the vignette. Hand it in as a pdf in DTU Learn.</p>
<ol type="1">
<li>Create a vignette with <code>usethis::use_vignette("package name")</code>.</li>
<li>When you are done writing it, run <code>devtools::build_vignettes()</code>.</li>
<li>At the top line of your vignette, change <code>rmarkdown::html_vignette</code> to <code>rmarkdown::pdf_document</code></li>
<li>Rerun <code>devtools::build_vignettes()</code> - the created pdf-file in the <code>doc</code>-folder is the document to hand it.</li>
<li>Lastly, duplicate the vignette as the GitHub README
<ul>
<li>Create a README with <code>usethis::use_readme_rmd( open = TRUE )</code>.</li>
<li>Copy the content of the vignette Rmarkdown into the readme <strong>Keep the top part of the README as is</strong>. If you overwrote it anyway, change <code>rmarkdown::pdf_document</code> to <code>rmarkdown::github_document</code>.</li>
<li>Run <code>devtools::build_readme()</code></li>
<li>Push the changes to GitHub</li>
</ul></li>
</ol>
<section id="last-tip-on-packages" class="level3">
<h3 class="anchored" data-anchor-id="last-tip-on-packages">Last tip on packages</h3>
<hr>
<p>Next week, I will introduce the <code>golem</code> package for building <a href="https://engineering-shiny.org/index.html">production-grade Shiny apps</a>. However, I personally also use it to quickly get going with packages.</p>
<p>When starting out with an R package, it may seem complicated with a lot of things to remember. <code>golem</code> remembers these things for you. When setting up your package / Shiny app with <code>golem::create_golem("Name of your awesome package/app")</code>, it creates a <code>dev</code> folder with a few files listing all you need to get started with an R package.</p>
<p>It does also give you a lot of other things that you will rarely use, and it also sets up some basic structures for Shiny apps. These can simply be deleted if you are not also building a Shiny app (which you will next week).</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab07.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Lab 7: Collaborative Bio Data Science using GitHub via RStudio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lab09.html" class="pagination-link">
        <span class="nav-page-text">Lab 9 Creating a Simple Shiny Application</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">R for Bio Data Science</div>   
    <div class="nav-footer-right">Full course description available at <a href="https://kurser.dtu.dk/course/22100">DTU Course Base</a>.</div>
  </div>
</footer>



</body></html>