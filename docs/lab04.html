<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Bio Data Science - Lab 4: Data Wrangling I</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab05.html" rel="next">
<link href="./lab03.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Lab 4: Data Wrangling I</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Bio Data Science</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome to R for Bio Data Science</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prologue.html" class="sidebar-item-text sidebar-link">Prologue</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting_started.html" class="sidebar-item-text sidebar-link">Getting Started</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./lab00.html" class="sidebar-item-text sidebar-link">Course Labs</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab01.html" class="sidebar-item-text sidebar-link">Lab 1: Course Intro &amp; the Very Basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab02.html" class="sidebar-item-text sidebar-link">Lab 2: Data Visualisation I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab03.html" class="sidebar-item-text sidebar-link">Lab 3: Data Visualisation II</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab04.html" class="sidebar-item-text sidebar-link active">Lab 4: Data Wrangling I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab05.html" class="sidebar-item-text sidebar-link">Lab 5: Data Wrangling II</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab06.html" class="sidebar-item-text sidebar-link">Lab 6: (a bit on) Modelling in the Tidyverse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab07.html" class="sidebar-item-text sidebar-link">Lab 7: Scripting in a Reproducible and Collaborative Framework using GitHub via RStudio</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab08.html" class="sidebar-item-text sidebar-link">Lab 8: Creating a Simple R-package</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab09.html" class="sidebar-item-text sidebar-link">Lab 9 Creating a Simple Shiny Application</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab10.html" class="sidebar-item-text sidebar-link">Lab 10 Project Startup &amp; Industry Talks</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./resources.html" class="sidebar-item-text sidebar-link">Resources</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./paths_and_projects.html" class="sidebar-item-text sidebar-link">Paths &amp; Projects</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variable_assignment_in_r.html" class="sidebar-item-text sidebar-link">Variable Assignment in <code>R</code></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_styling.html" class="sidebar-item-text sidebar-link">Code Styling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./external_resources.html" class="sidebar-item-text sidebar-link">External Resources</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./course_elements.html" class="sidebar-item-text sidebar-link">Course Elements</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignments.html" class="sidebar-item-text sidebar-link">Assignments</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_faq.html" class="sidebar-item-text sidebar-link">Project FAQ</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exam.html" class="sidebar-item-text sidebar-link">Exam</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Package(s)</a></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#learning-materials" id="toc-learning-materials" class="nav-link" data-scroll-target="#learning-materials">Learning Materials</a></li>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning Objectives</a></li>
  <li><a href="#sec-exercises" id="toc-sec-exercises" class="nav-link" data-scroll-target="#sec-exercises">Exercises</a>
  <ul class="collapse">
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#brief-refresh-of-quarto-so-far" id="toc-brief-refresh-of-quarto-so-far" class="nav-link" data-scroll-target="#brief-refresh-of-quarto-so-far">Brief refresh of Quarto so far</a></li>
  <li><a href="#a-few-handy-short-cuts" id="toc-a-few-handy-short-cuts" class="nav-link" data-scroll-target="#a-few-handy-short-cuts">A few handy short cuts</a></li>
  </ul></li>
  <li><a href="#a-few-initial-questions" id="toc-a-few-initial-questions" class="nav-link" data-scroll-target="#a-few-initial-questions">A few initial questions</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#work-with-the-diabetes-data-set" id="toc-work-with-the-diabetes-data-set" class="nav-link" data-scroll-target="#work-with-the-diabetes-data-set">Work with the diabetes data set</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Lab 4: Data Wrangling I</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Package(s)</h2>
<ul>
<li><a href="https://dplyr.tidyverse.org">dplyr</a></li>
<li><a href="https://readr.tidyverse.org">readr</a></li>
<li><a href="https://tibble.tidyverse.org">tibble</a></li>
</ul>
</section>
<section id="schedule" class="level2">
<h2 class="anchored" data-anchor-id="schedule">Schedule</h2>
<ul>
<li>08.00 - 08.15: <a href="https://raw.githack.com/r4bds/r4bds.github.io/main/recap_lab04.html">Recap of Lab 3</a></li>
<li>08.15 - 08.30: Assignment 2 walk-through</li>
<li>08.30 - 09.00: <a href="https://raw.githack.com/r4bds/r4bds.github.io/main/lecture_lab04.html">Lecture</a></li>
<li>09.00 - 09.15: Break</li>
<li>09.00 - 12.00: <a href="#sec-exercises">Exercises</a></li>
</ul>
</section>
<section id="learning-materials" class="level2">
<h2 class="anchored" data-anchor-id="learning-materials">Learning Materials</h2>
<p><em>Please prepare the following materials:</em></p>
<ul>
<li>R4DS2e book: <a href="https://r4ds.hadley.nz/data-transform">Chapter 4</a>, <a href="https://r4ds.hadley.nz/workflow-style">chapter 5</a>, <a href="https://r4ds.hadley.nz/data-import">chapter 8</a>, <a href="https://r4ds.hadley.nz/workflow-help">chapter 9</a></li>
<li>Web: <a href="https://www.youtube.com/watch?v=jOd65mR1zfw">What is data wrangling? Intro, Motivation, Outline, Setup ‚Äì Pt. 1 Data Wrangling Introduction</a></li>
<li>Web: (NB! STOP at 7:45, i.e.&nbsp;skip tidyr) <a href="https://www.youtube.com/watch?v=1ELALQlO-yM">Tidy Data and tidyr ‚Äì Pt 2 Intro to Data Wrangling with R and the Tidyverse</a></li>
<li>Web: <a href="https://www.youtube.com/watch?v=Zc_ufg4uW4U">Data Manipulation Tools: dplyr ‚Äì Pt 3 Intro to the Grammar of Data Manipulation with R</a></li>
</ul>
</section>
<section id="learning-objectives" class="level2">
<h2 class="anchored" data-anchor-id="learning-objectives">Learning Objectives</h2>
<p><em>A student who has met the objectives of the session will be able to:</em></p>
<ul>
<li>Understand and apply the 6 basic dplyr verbs: <code>filter()</code>, <code>arrange()</code>, <code>select()</code>, <code>mutate()</code>, <code>summarise()</code> and <code>group_by()</code></li>
<li>Construct and apply logical statements in context with <code>dplyr</code> pipelines</li>
<li>Understand and apply the additional verbs <code>count()</code>, <code>drop_na()</code>, <code>View()</code></li>
<li>Combine dplyr verbs to form a data manipulation pipeline using the pipe <code>|&gt;</code> operator</li>
<li>Decipher the components and functions hereof in a <code>dplyr</code> pipeline</li>
</ul>
</section>
<section id="sec-exercises" class="level2">
<h2 class="anchored" data-anchor-id="sec-exercises">Exercises</h2>
<div class="cell">

</div>
<p><em>Important: As we progress, avoid using black-box do-everything-with-one-command R-packages like e.g.&nbsp;<code>ggpubr</code> - I want you to learn the underlying technical bio data science! ‚Ä¶and why is that? Because if you use these type of packages, you will be limited to their functionality, whereas if you truly understand ggplot - The sky is the limit! Basically, it the clich√© that ‚ÄúIf you give a man a fish, you feed him for a day. If you teach a man to fish, you feed him for a lifetime‚Äù</em></p>
<section id="getting-started" class="level3">
<h3 class="anchored" data-anchor-id="getting-started">Getting Started</h3>
<p>Use this link to go to the <a href="https://teaching.healthtech.dtu.dk/22100/rstudio.php">R for Bio Data Science RStudio Cloud Server</a></p>
<p>First things first:</p>
<ul>
<li>Create a new Quarto Document for todays exercises, e.g.&nbsp;<code>lab04_exercises.qmd</code></li>
</ul>
<p>Note that: - The Quarto document MUST be placed together with your <code>.Rproj</code> file (defining, the project root - look in your <code>Files</code>-pane) and also there, the <code>data</code>-folder should be placed!</p>
<p><em>Understanding how paths and projects work is important. In case this is no entirely clear, a new chapter has been added on <a href="./paths_and_projects.html">Paths and Projects</a>.</em></p>
</section>
<section id="brief-refresh-of-quarto-so-far" class="level3">
<h3 class="anchored" data-anchor-id="brief-refresh-of-quarto-so-far">Brief refresh of Quarto so far</h3>
<p>Recall the syntax for a new code chunk, where all your <code>R</code> code goes any text and notes must be <em>outside</em> the chunk tags:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Here the code goes</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2
[1] 2</code></pre>
</div>
</div>
<p>Outside the code-chunks, go our markdown, e.g.:</p>
<pre><code>  # Header level 1
  ## Header level 2
  ### Header level 3
  *A text in italics*
  **A text in bold**
  Normal text describing and explaining</code></pre>
<p>Now, in your new Quarto document, create a new <code>Header level 2</code>, e.g.:</p>
<pre><code>  ## Load Libraries</code></pre>
<p>and under your new header, add a new code chunk, like so</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And run the chunk. This will load our data science toolbox, including <code>dplyr</code> (and <code>ggplot</code>). But wait, what does the <code>#| message: false</code>-part do? ü§∑Ô∏è ü§î</p>
<p><strong>Try to structure your Rmarkdown document as your course notes, i.e.&nbsp;add notes while solving the exercises aiming at creating a revisitable reference for your final project work</strong></p>
<p>Bonus info: We are engineers, so of course, we love equations, we can include standard <span class="math inline">\(\LaTeX\)</span> syntax, e.g.:</p>
<pre><code>  $E(x) = \frac{1}{n} \cdot \sum_{i=1}^{n} x_{i}$</code></pre>
<p>Try it!</p>
</section>
<section id="a-few-handy-short-cuts" class="level3">
<h3 class="anchored" data-anchor-id="a-few-handy-short-cuts">A few handy short cuts</h3>
<p>Insert new code chunk:</p>
<ul>
<li>Mac: CTRL + OPTION + i</li>
<li>Windows: CTRL + OPTION + i</li>
</ul>
<p>Render my Quarto document</p>
<ul>
<li>Mac: CMD + SHIFT + k</li>
<li>Win: CTRL + SHIFT + k</li>
</ul>
<p>Run line in chunk</p>
<ul>
<li>Mac: CMD + ENTER</li>
<li>Win: CTRL + ENTER</li>
</ul>
<p>Run entire chunk</p>
<ul>
<li>Mac: CMD + SHIFT + ENTER</li>
<li>Win: CTRL + SHIFT + ENTER</li>
</ul>
<p>Insert the pipe symbol <code>|&gt;</code></p>
<ul>
<li>Mac: CMD + SHIFT + m</li>
<li>Win: CTRL + SHIFT + m</li>
</ul>
<p><em>Note, if you‚Äôre trying this out and you see <code>%&gt;%</code> instead of <code>|&gt;</code>, then go to <code>Tools</code>, <code>Global Options...</code>, <code>Code</code> and check the box <code>Use native pipeoperator</code></em></p>
</section>
</section>
<section id="a-few-initial-questions" class="level2">
<h2 class="anchored" data-anchor-id="a-few-initial-questions">A few initial questions</h2>
<p>First, if you don‚Äôt feel completely comfortable with the <code>group_by |&gt; summarise</code>-workflow, then no worries - Feel free to visit this short <a href="https://www.youtube.com/watch?v=zAlbrPozMHI">R Tutorial: Grouping and summarizing</a></p>
<p>Then, in your groups, discuss the following primer questions. Note, when asked for <em>‚Äúwhat is the output‚Äù</em>, do not run the code in the console, instead try to <strong>talk and think about it</strong> and write your answers and notes in your Quarto document for the day:</p>
<p>First, in a new chunk, run <code>tibble(x = c(4, 3, 5, 1, 2))</code>, so you understand what it does, then - Discuss in your group, what is the output of, remember first talk, then check understanding by running code:</p>
<ul>
<li><p><strong>Q1: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; filter(x &gt; 2)</code>?</strong></p></li>
<li><p><strong>Q2: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; arrange(x)</code>?</strong></p></li>
<li><p><strong>Q3: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; arrange(desc(x))</code>?</strong></p></li>
<li><p><strong>Q4: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; arrange(desc(desc(x)))</code>?</strong></p></li>
<li><p><strong>Q5: <code>tibble(x = c(4, 3, 5, 1, 2), y = c(2, 4, 3, 5, 1)) |&gt; select(x)</code>?</strong></p></li>
<li><p><strong>Q6: <code>tibble(x = c(4, 3, 5, 1, 2), y = c(2, 4, 3, 5, 1)) |&gt; select(y)</code>?</strong></p></li>
<li><p><strong>Q7: <code>tibble(x = c(4, 3, 5, 1, 2), y = c(2, 4, 3, 5, 1)) |&gt; select(-x)</code>?</strong></p></li>
<li><p><strong>Q8: <code>tibble(x = c(4, 3, 5, 1, 2), y = c(2, 4, 3, 5, 1)) |&gt; select(-x, -y)</code>?</strong></p></li>
<li><p><strong>Q9: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; mutate(x_dbl = 2*x)</code>?</strong></p></li>
<li><p><strong>Q10: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; mutate(x_dbl = 2 * x, x_qdr = 2*x_dbl)</code>?</strong></p></li>
<li><p><strong>Q11: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; summarise(x_mu = mean(x))</code>?</strong></p></li>
<li><p><strong>Q12: <code>tibble(x = c(4, 3, 5, 1, 2)) |&gt; summarise(x_max = max(x))</code>?</strong></p></li>
<li><p><strong>Q13: <code>tibble(lbl = c("A", "A", "B", "B", "C"), x = c(4, NA, 5, 1, 2)) |&gt; group_by(lbl) |&gt; summarise(x_mu = mean(x), x_max = max(x))</code>?</strong></p></li>
<li><p><strong>Q14: <code>tibble(lbl = c("A", "A", "B", "B", "C"), x = c(4, 3, 5, 1, 2)) |&gt; group_by(lbl) |&gt; summarise(n = n())</code>?</strong></p></li>
<li><p><strong>Q15: <code>tibble(lbl = c("A", "A", "B", "B", "C"), x = c(4, 3, 5, 1, 2)) |&gt; count(lbl)</code>?</strong></p></li>
</ul>
<p>In the following, return to these questions and your answers for reference on the <code>dplyr</code> verbs!</p>
</section>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load data</h2>
<p>Again, add a new header to your Quarto document, e.g.&nbsp;<code>## Load Data</code>, then:</p>
<ol type="1">
<li>Go to the <a href="https://hbiostat.org/data/">Vanderbilt Biostatistics Datasets</a> site</li>
<li>Find <strong>Diabetes data</strong> and download the <code>diabetes.csv</code> file</li>
<li>You should have a <code>data</code>-folder, if not, then in the <code>Files</code> pane, click the <code>New Folder</code> button, enter folder name <code>data</code> and click <code>ok</code></li>
<li>Now, click on the folder you created</li>
<li>Click the <img src="images/button_upload.png" class="img-fluid"> <code>Upload</code>-button and navigate to the <code>diabetes.csv</code> file you downloaded</li>
<li>Clicking the two dots <code>..</code> above the file you uploaded, look for <img src="images/paths_dir_up.png" class="img-fluid"> <code>..</code>, will take you one level up in your project path</li>
<li>Insert a new code chunk in your Quarto document</li>
<li>Add and then run the following code</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>diabetes_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/diabetes.csv"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>diabetes_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then realise that we could simply have run the following code to do the exact same thing (Yes, <code>readr</code> is pretty nifty):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the data directory programmatically</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dir_create</span>(<span class="at">x =</span> <span class="st">"data"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve the data directly</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>diabetes_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://hbiostat.org/data/repo/diabetes.csv"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the data to disk</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="at">x =</span> diabetes_data,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"data/diabetes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Just remember the echo/eval trick from last session to avoid retrieving online data each time you render your Quarto document</em></p>
</section>
<section id="work-with-the-diabetes-data-set" class="level2">
<h2 class="anchored" data-anchor-id="work-with-the-diabetes-data-set">Work with the diabetes data set</h2>
<p>Use the pipe <code>|&gt;</code> to use the <code>View()</code>-function to inspect the data set. Note, if you click the <img src="images/button_view.png" class="img-fluid">-button, you will get a spreadsheet-like view of the data, allowing you to get an overview.</p>
<ul>
<li><strong>Q1: How many observations and how many variables?</strong></li>
<li><strong>Q2: Is this a tidy data set? Which three rules must be satisfied?</strong></li>
<li><strong>Q3: When you run the chunk, then underneath each column name is stated <code>&lt;chr&gt;</code> and <code>&lt;dbl&gt;</code> what is that?</strong></li>
</ul>
<p>Before we continue</p>
<ul>
<li><strong>T1: Change the <code>height</code>, <code>weight</code>, <code>waist</code> and <code>hip</code> from inches/pounds to the metric system (cm/kg), rounding to 1 decimal</strong></li>
</ul>
<div class="cell">

</div>
<p>Let us try to take a closer look at the data by various subsetting (How many‚Ä¶ is equal to the number of rows in the subset of the data you created):</p>
<ul>
<li><p><strong>Q4: How many weigh less than 100kg?</strong></p></li>
<li><p><strong>Q5: How many weigh more than 100kg?</strong></p></li>
<li><p><strong>Q6: How many weigh more than 100kg and are less than 1.6m tall?</strong></p></li>
<li><p><strong>Q7: How many women are taller than 1.8m?</strong></p></li>
<li><p><strong>Q8: How many men are taller than 1.8m?</strong></p></li>
<li><p><strong>Q9: How many women in Louisa are older than 30?</strong></p></li>
<li><p><strong>Q10: How many men in Buckingham are younger than 30 and taller than 1.9m?</strong></p></li>
<li><p><strong>T2: Make a scatter plot of <code>weight</code> versus <code>height</code> and colour by sex for inhabitants of Louisa above the age of 40</strong></p></li>
<li><p><strong>T3: Make a boxplot of height versus location stratified on sex for people above the age of 50</strong></p></li>
</ul>
<p>Sorting columns can aid in getting an overview of variable ranges (don‚Äôt use the summary function yet for this one)</p>
<ul>
<li><strong>Q11: How old is the youngest person?</strong></li>
<li><strong>Q12: How old is the oldest person?</strong></li>
<li><strong>Q13: Of all the 20-year olds, what is the height of the tallest?</strong></li>
<li><strong>Q14: Of all the 20-year olds, what is the height of the shortest?</strong></li>
</ul>
<p>Choosing specific columns can be used to work with a subset of the data for a specific purpose</p>
<ul>
<li><strong>Q15: How many columns (variables) <code>starts_with</code> a ‚Äúb‚Äù?</strong></li>
<li><strong>Q16: How many columns (variables) <code>contains</code> the word ‚Äúeight‚Äù?</strong></li>
</ul>
<p>Creating new variables is an integral part of data manipulation</p>
<ul>
<li><strong>T4: Create a new variable, where you calculate the BMI</strong></li>
</ul>
<div class="cell">

</div>
<ul>
<li><strong>T5: Create a <code>BMI_class</code> variable</strong></li>
</ul>
<p><em>Take a look at the following code snippet to get you started:</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trichotomised =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Less than -1"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">1</span> <span class="sc">&lt;=</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"larger than or equal to -1 and smaller than 1"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">&lt;=</span> x <span class="sc">~</span> <span class="st">"Larger than or equal to 1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>and then go read about <a href="https://www.ncbi.nlm.nih.gov/books/NBK541070/">BMI classification here</a> and discuss in your group how to extract classifications from the Definition/Introduction section</em></p>
<p>Note, the <code>cut()</code>-function could be used here, but you should try to use <code>case_when()</code> as illustrated in the example chunk above.</p>
<div class="cell">

</div>
<p>Once you have created the variable, you will need to convert it to a categorical variable, in <code>R</code>, these are called a <code>factor</code> and you can set the levels like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>diabetes_data <span class="ot">&lt;-</span> diabetes_data <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">BMI_class =</span> <span class="fu">factor</span>(BMI_class,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span>  <span class="fu">c</span>(<span class="st">"my 1st category"</span>, <span class="st">"my 2nd category"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"my 3rd category"</span>, <span class="st">"my nth category"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is <strong>very</strong> important for plotting, as this will determine the order in which the categories appear on the plot!</p>
<ul>
<li><strong>T6: Create a boxplot of <code>hdl</code> versus BMI_class</strong></li>
<li><strong>Q17: What do you see?</strong></li>
<li><strong>T7: Create a <code>BFP</code> (Body fat percentage) variable</strong></li>
</ul>
<details>
<p>
</p><summary>
Click here for hint
</summary>
<p></p>
<p>BFP can be calculated usin the below equation <a href="https://www.nature.com/articles/0802006">source</a>:</p>
<p><span class="math display">\[BFP = 1.39 \cdot BMI + 0.16 \cdot age - 10.34 \cdot sex - 9\]</span></p>
Where <span class="math inline">\(sex\)</span> is defined as being <span class="math inline">\(0\)</span> for female and <span class="math inline">\(1\)</span> for male.
</details>
<div class="cell">

</div>
<ul>
<li><strong>T8: Create a <code>WHR</code> (waist-to-hip ratio) variable</strong></li>
<li><strong>Q18: Which correlate better with <code>BMI</code>, <code>WHR</code> or <code>BFP</code>?</strong> <span style="color: red;">GROUP ASSIGNMENT</span></li>
</ul>
<details>
<p>
</p><summary>
Click here for hint
</summary>
<p></p>
<em>Is there a certain plot-type, which can visualise if the relationship between two variables and give insights to if they are correlated? Can you perhaps use an <code>R</code>-function to compute the ‚Äúcorrelation coefficient‚Äù?. Do not use e.g.&nbsp;<code>ggpubr</code>, use only <code>tidyverse</code> and <code>base</code>)</em>
</details>
<p>Now, with this augmented data set, let us create some summary statistics</p>
<ul>
<li><strong>Q19: How many women and men are there in the data set?</strong></li>
<li><strong>Q20: How many women and men are there from Buckingham and Louisa respectively in the data set?</strong></li>
<li><strong>Q21: How many are in each of the <code>BMI_class</code> groups?</strong></li>
<li><strong>Q22: Given the code below, explain the difference between A and B?</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>diabetes_data <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> BMI_class)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># B</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>diabetes_data <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(BMI_class) <span class="sc">|&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> BMI_class, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>T9: For each <code>BMI_class</code> group, calculate the average weight and associated standard deviation</strong></li>
<li><strong>Q23: What was the average age of the women living in Buckingham in the study?</strong></li>
</ul>
<p>Finally, if you reach this point and there is still time left. Take some time to do some exploratory plots of the data set and see if you can find something interesting.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab03.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Lab 3: Data Visualisation II</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lab05.html" class="pagination-link">
        <span class="nav-page-text">Lab 5: Data Wrangling II</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">R for Bio Data Science</div>   
    <div class="nav-footer-right">Full course description available at <a href="https://kurser.dtu.dk/course/22100">DTU Course Base</a>.</div>
  </div>
</footer>



</body></html>